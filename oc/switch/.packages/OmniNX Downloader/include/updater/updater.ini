;title='OmniNX Updater'
;creator=Woody2408, NiklasCFW
;version=1.0.0
;about='OmniNX Updater'
;show_widget=true

[@CFW Pack]

[Version]
;mode=table
;background=true
;gap=20
ini_file '/config/omninx/manifest.ini'
'Pack Variante' = '{ini_file(OmniNX,channel_pack)}'
'Zurzeit installiert' = '{ini_file(OmniNX,version)}'

[OmniNX]
try:
download https://api.github.com/repos/OmniNX/OmniNX/releases?per_page=1 /config/ultrahand/downloads/omninx-api.json
json_file /config/ultrahand/downloads/omninx-api.json
ini_file '/config/omninx/manifest.ini'
download {json_file(0,assets,{ini_file(OmniNX,update_channel)},browser_download_url)} /config/ultrahand/downloads/OmniNX.zip
unzip /config/ultrahand/downloads/OmniNX.zip /
delete /config/ultrahand/downloads/omninx-api.json
delete /config/ultrahand/downloads/OmniNX.zip
notify '{WARNING_SYMBOL} F체hre in Hekate fort' 24

[*Update Channel 채ndern]
;mini=true
;mode=forwarder
package_source ./change_channel.ini
refresh-to *Update Channel 채ndern

[gap]
;mode=table
;background=false
;gap=30

[Version]
;mode=table
;background=true
;gap=20
'Zurzeit installiert' = '{hos_version}'

[Switch Firmware]
try:
ini_file ./RELEASE.ini
download https://api.github.com/repos/OmniNX/NX_Firmware/releases?per_page=1 /config/ultrahand/downloads/firmware-api.json
json_file /config/ultrahand/downloads/firmware-api.json
download {json_file(0,assets,0,browser_download_url)} /config/ultrahand/downloads/firmware.zip
mkdir '/Firmware.{ini_file(Release Info,firmware_version)}/'
unzip '/config/ultrahand/downloads/firmware.zip' '/Firmware.{ini_file(Release Info,firmware_version)}/'
delete '/config/ultrahand/downloads/firmware-api.json'
delete '/config/ultrahand/downloads/firmware.zip'
notify '{WARNING_SYMBOL} F체hre in Daybreak fort' 24

[gap]
;mode=table
;background=false
;gap=30

[Package Info]

[@Erweitert]

[Version]
;mode=table
;background=true
;gap=20
ini_file './CURRENT.ini'
'Zurzeit installiert' = '{ini_file(OmniNX Downloader,version)}'

[Omni Downloader]
try:
download https://api.github.com/repos/OmniNX/Omni-Downloader/releases?per_page=1 /config/ultrahand/downloads/omni-downloader-api.json
json_file /config/ultrahand/downloads/omni-downloader-api.json
download {json_file(0,assets,0,browser_download_url)} /config/ultrahand/downloads/omni-downloader.zip
unzip /config/ultrahand/downloads/omni-downloader.zip '/switch/.packages/'
delete /config/ultrahand/downloads/omni-downloader-api.json
delete /config/ultrahand/downloads/omni-downloader.zip